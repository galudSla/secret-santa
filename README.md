# üéÖ **Secret Santa Generator**  

## **Description**  
The **Secret Santa Generator** is a Python-based web application that organizes Secret Santa events. It randomly pairs participants, generates thoughtful gift recommendations using OpenAI's GPT API, and sends personalized emails via the Gmail API.  

A **live demonstration** is available on [**Hugging Face Spaces**](https://huggingface.co/spaces/galudSla/secret-santa), so you can test the tool without local setup!  

---

## üöÄ **Features**  
- **Randomized Pairing**: Ensures fair and unique gift pairings without duplicates.  
- **Gift Recommendations**: Uses OpenAI's GPT API to suggest personalized gifts based on optional participant input.  
- **Email Automation**: Sends participant details, gift assignments, and recommendations via Gmail API.  
- **Interactive UI**: Powered by Gradio for seamless user interaction.  
- **Live Demo**: Hosted on Hugging Face Spaces for immediate testing.  

---

## üõ†Ô∏è **Tech Stack**  
- **Python**  
- **Gradio** (UI Framework)  
- **Gmail API** (Email Automation)  
- **OpenAI GPT API** (Gift Recommendations)  
- **OAuth2** (Gmail API Authentication)  
- **Hugging Face Spaces** (Demo Hosting)  

---

## ‚öôÔ∏è **Setup Instructions**

### 1. **Prerequisites**  
Ensure you have the following tools installed:  
- Python 3.8+  
- Pip (Python Package Manager)  
- **Google Cloud Platform (GCP)** access for Gmail API setup.  
- **OpenAI API Key**  

---

### 2. **Clone the Repository**  
Run the following command:  
```bash
git clone https://github.com/yourusername/secret-santa-generator.git
cd secret-santa-generator
```

---

### 3. **Set Up Gmail API**  
Before running the app, you must configure the **Gmail API**:  
1. Go to the [Google Developer Console](https://console.cloud.google.com/).  
2. Enable the **Gmail API** for your project.  
3. Generate OAuth 2.0 credentials and download the `credentials.json` file.  
4. Place `credentials.json` in the root directory of the project.  

---

### 4. **Install Dependencies**  
Run the following command to install required libraries:  
```bash
pip install -r requirements.txt
```

---

### 5. **Authenticate Gmail API**  
To authenticate Gmail API and generate your token:  
1. Run the `functions.py` script:  
   ```bash
   python functions.py
   ```
2. Follow the OAuth instructions to allow access.  
3. This creates a `token.json` file or saves a token in your environment.  

---

### 6. **Configure Environment Variables**  
Create a `.env` file in the root directory and add:  
```env
# OpenAI API Key
OPENAI_API_KEY=your_openai_api_key

# Your Gmail app email
app_email=your_email@gmail.com

# Token (optional if using environment-based token management)
token={"token_details_here"}
```

---

### 7. **Run the Application**  
To launch the Gradio-based app locally, run:  
```bash
python your_script_name.py
```
Open your browser and visit:  
```plaintext
http://localhost:7860
```

---

## üé• **How to Use**  
1. Start the app or access the [**Hugging Face Spaces Demo**]((https://huggingface.co/spaces/galudSla/secret-santa)).  
2. Enter participant details, including:  
   - **Name**  
   - **Email**  
   - Optional **gift prompt** (interests or hobbies).  
3. Click **START SECRET SANTA**.  
4. Participants receive emails with:  
   - Their gift recipient's name.  
   - A list of thoughtful gift suggestions generated by ChatGPT.  

---

## üîë **Key Implementation Notes**  

### **Difference Between `Credentials.from_authorized_user_info` and `Credentials.from_authorized_user_file`**  
- `Credentials.from_authorized_user_file`:  
   - Loads credentials directly from a `token.json` file saved after OAuth authentication.  
   - Used for persistent storage across sessions.  
   - **Example**:  
     ```python
     creds = Credentials.from_authorized_user_file('token.json', SCOPES)
     ```  
- `Credentials.from_authorized_user_info`:  
   - Loads credentials dynamically from a dictionary or environment variables.  
   - Ideal for deployment scenarios where credentials are stored securely in environment variables.  
   - **Example**:  
     ```python
     creds = Credentials.from_authorized_user_info(token_dict, SCOPES)
     ```  

---

## üß™ **Testing**  
- Use test email credentials or disable email-sending features temporarily during development.  
- Ensure your Gmail API quota allows sufficient email dispatches.  

---

## üôå **Contributing**  
Pull requests are welcome! To contribute:  
1. Fork the repository.  
2. Create a feature branch.  
3. Submit a pull request with a detailed description of your changes.  

---

## üìú **License**  
This project is licensed under the MIT License.  
